<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hierarchical and Grouped Time Series â€¢ hts</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">hts</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="hts" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#hts" class="anchor"></a>hts</h1></div>

<p>The R package <em>hts</em> presents functions to create, plot and forecast hierarchical and grouped time series.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the <strong>stable</strong> version on <a href="https://cran.r-project.org/package=hts">R CRAN</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">'hts'</span>, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>You can also install the <strong>development</strong> version from <a href="https://github.com/robjhyndman/gts">Github</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"earowang/hts"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="example-1-hierarchical-time-series" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-hierarchical-time-series" class="anchor"></a>Example 1: hierarchical time series</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(hts)
<span class="co">#&gt; Loading required package: forecast</span>

<span class="co"># hts example 1</span>
<span class="kw">print</span>(htseg1)
<span class="co">#&gt; $bts</span>
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1992 </span>
<span class="co">#&gt; End = 2001 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;            AA        AB       AC       BA       BB</span>
<span class="co">#&gt; 1992 7.862669  9.267647 10.08102 10.49276 11.04398</span>
<span class="co">#&gt; 1993 8.340355  9.416544 10.08193 10.51712 11.12452</span>
<span class="co">#&gt; 1994 8.549132  9.479022 10.11719 10.54013 11.24691</span>
<span class="co">#&gt; 1995 8.597699  9.532376 10.14705 10.61220 11.35138</span>
<span class="co">#&gt; 1996 8.770196  9.547591 10.16021 10.64932 11.48114</span>
<span class="co">#&gt; 1997 8.837793  9.555664 10.17101 10.70736 11.57668</span>
<span class="co">#&gt; 1998 8.893267  9.730347 10.28392 10.86323 11.93846</span>
<span class="co">#&gt; 1999 8.933993  9.797294 10.29026 10.92463 11.99712</span>
<span class="co">#&gt; 2000 9.133653  9.921262 10.34817 11.00622 12.16865</span>
<span class="co">#&gt; 2001 9.152636 10.022783 10.46706 11.03531 12.53717</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $nodes</span>
<span class="co">#&gt; $nodes$`Level 0`</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $nodes$`Level 1`</span>
<span class="co">#&gt; [1] 3 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels</span>
<span class="co">#&gt; $labels$`Level 0`</span>
<span class="co">#&gt; [1] "Total"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels$`Level 1`</span>
<span class="co">#&gt; [1] "A" "B"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels$`Level 2`</span>
<span class="co">#&gt; [1] "AA" "AB" "AC" "BA" "BB"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "gts" "hts"</span>
<span class="kw">summary</span>(htseg1)
<span class="co">#&gt;        Length Class  Mode   </span>
<span class="co">#&gt; bts    50     mts    numeric</span>
<span class="co">#&gt; nodes   2     -none- list   </span>
<span class="co">#&gt; labels  3     -none- list</span>
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(htseg1)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1992 </span>
<span class="co">#&gt; End = 2001 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;         Total        A        B       AA        AB       AC       BA</span>
<span class="co">#&gt; 1992 48.74808 27.21134 21.53674 7.862669  9.267647 10.08102 10.49276</span>
<span class="co">#&gt; 1993 49.48047 27.83883 21.64164 8.340355  9.416544 10.08193 10.51712</span>
<span class="co">#&gt; 1994 49.93238 28.14535 21.78704 8.549132  9.479022 10.11719 10.54013</span>
<span class="co">#&gt; 1995 50.24070 28.27712 21.96358 8.597699  9.532376 10.14705 10.61220</span>
<span class="co">#&gt; 1996 50.60846 28.47800 22.13046 8.770196  9.547591 10.16021 10.64932</span>
<span class="co">#&gt; 1997 50.84851 28.56447 22.28404 8.837793  9.555664 10.17101 10.70736</span>
<span class="co">#&gt; 1998 51.70922 28.90753 22.80169 8.893267  9.730347 10.28392 10.86323</span>
<span class="co">#&gt; 1999 51.94330 29.02155 22.92175 8.933993  9.797294 10.29026 10.92463</span>
<span class="co">#&gt; 2000 52.57796 29.40308 23.17488 9.133653  9.921262 10.34817 11.00622</span>
<span class="co">#&gt; 2001 53.21496 29.64248 23.57248 9.152636 10.022783 10.46706 11.03531</span>
<span class="co">#&gt;            BB</span>
<span class="co">#&gt; 1992 11.04398</span>
<span class="co">#&gt; 1993 11.12452</span>
<span class="co">#&gt; 1994 11.24691</span>
<span class="co">#&gt; 1995 11.35138</span>
<span class="co">#&gt; 1996 11.48114</span>
<span class="co">#&gt; 1997 11.57668</span>
<span class="co">#&gt; 1998 11.93846</span>
<span class="co">#&gt; 1999 11.99712</span>
<span class="co">#&gt; 2000 12.16865</span>
<span class="co">#&gt; 2001 12.53717</span>
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(htseg1, <span class="dt">levels =</span> <span class="dv">1</span>)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1992 </span>
<span class="co">#&gt; End = 2001 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;             A        B</span>
<span class="co">#&gt; 1992 27.21134 21.53674</span>
<span class="co">#&gt; 1993 27.83883 21.64164</span>
<span class="co">#&gt; 1994 28.14535 21.78704</span>
<span class="co">#&gt; 1995 28.27712 21.96358</span>
<span class="co">#&gt; 1996 28.47800 22.13046</span>
<span class="co">#&gt; 1997 28.56447 22.28404</span>
<span class="co">#&gt; 1998 28.90753 22.80169</span>
<span class="co">#&gt; 1999 29.02155 22.92175</span>
<span class="co">#&gt; 2000 29.40308 23.17488</span>
<span class="co">#&gt; 2001 29.64248 23.57248</span>
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(htseg1, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1992 </span>
<span class="co">#&gt; End = 2001 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;         Total       AA        AB       AC       BA       BB</span>
<span class="co">#&gt; 1992 48.74808 7.862669  9.267647 10.08102 10.49276 11.04398</span>
<span class="co">#&gt; 1993 49.48047 8.340355  9.416544 10.08193 10.51712 11.12452</span>
<span class="co">#&gt; 1994 49.93238 8.549132  9.479022 10.11719 10.54013 11.24691</span>
<span class="co">#&gt; 1995 50.24070 8.597699  9.532376 10.14705 10.61220 11.35138</span>
<span class="co">#&gt; 1996 50.60846 8.770196  9.547591 10.16021 10.64932 11.48114</span>
<span class="co">#&gt; 1997 50.84851 8.837793  9.555664 10.17101 10.70736 11.57668</span>
<span class="co">#&gt; 1998 51.70922 8.893267  9.730347 10.28392 10.86323 11.93846</span>
<span class="co">#&gt; 1999 51.94330 8.933993  9.797294 10.29026 10.92463 11.99712</span>
<span class="co">#&gt; 2000 52.57796 9.133653  9.921262 10.34817 11.00622 12.16865</span>
<span class="co">#&gt; 2001 53.21496 9.152636 10.022783 10.46706 11.03531 12.53717</span>
<span class="kw">plot</span>(htseg1, <span class="dt">levels =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="figure/hts-eg1-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/smatrix.html">smatrix</a></span>(htseg1)  <span class="co"># Return the dense mode</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span>
<span class="co">#&gt; [1,]    1    1    1    1    1</span>
<span class="co">#&gt; [2,]    1    1    1    0    0</span>
<span class="co">#&gt; [3,]    0    0    0    1    1</span>
<span class="co">#&gt; [4,]    1    0    0    0    0</span>
<span class="co">#&gt; [5,]    0    1    0    0    0</span>
<span class="co">#&gt; [6,]    0    0    1    0    0</span>
<span class="co">#&gt; [7,]    0    0    0    1    0</span>
<span class="co">#&gt; [8,]    0    0    0    0    1</span>

<span class="co"># Forecasts</span>
fcasts1.bu &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  htseg1, <span class="dt">h =</span> <span class="dv">4</span>, <span class="dt">method =</span> <span class="st">"bu"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>, <span class="dt">parallel =</span> <span class="ot">TRUE</span>
)
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(fcasts1.bu)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 2002 </span>
<span class="co">#&gt; End = 2005 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;        Total        A        B       AA       AB       AC       BA</span>
<span class="co">#&gt; 2002 53.2149 29.64246 23.57244 9.152634 10.02277 10.46705 11.03531</span>
<span class="co">#&gt; 2003 53.2149 29.64246 23.57244 9.152634 10.02277 10.46705 11.03531</span>
<span class="co">#&gt; 2004 53.2149 29.64246 23.57244 9.152634 10.02277 10.46705 11.03531</span>
<span class="co">#&gt; 2005 53.2149 29.64246 23.57244 9.152634 10.02277 10.46705 11.03531</span>
<span class="co">#&gt;            BB</span>
<span class="co">#&gt; 2002 12.53713</span>
<span class="co">#&gt; 2003 12.53713</span>
<span class="co">#&gt; 2004 12.53713</span>
<span class="co">#&gt; 2005 12.53713</span>
<span class="kw">summary</span>(fcasts1.bu)
<span class="co">#&gt;         Length Class  Mode     </span>
<span class="co">#&gt; bts     20     mts    numeric  </span>
<span class="co">#&gt; histy   50     mts    numeric  </span>
<span class="co">#&gt; labels   3     -none- list     </span>
<span class="co">#&gt; method   1     -none- character</span>
<span class="co">#&gt; fmethod  1     -none- character</span>
<span class="co">#&gt; nodes    2     -none- list</span>
fcasts1.td &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  htseg1, <span class="dt">h =</span> <span class="dv">4</span>, <span class="dt">method =</span> <span class="st">"tdfp"</span>, <span class="dt">fmethod =</span> <span class="st">"arima"</span>, <span class="dt">keep.fitted =</span> <span class="ot">TRUE</span>
)
<span class="kw">summary</span>(fcasts1.td)  <span class="co"># When keep.fitted = TRUE, return in-sample accuracy</span>
<span class="co">#&gt;         Length Class  Mode     </span>
<span class="co">#&gt; bts     20     mts    numeric  </span>
<span class="co">#&gt; histy   50     mts    numeric  </span>
<span class="co">#&gt; labels   3     -none- list     </span>
<span class="co">#&gt; method   1     -none- character</span>
<span class="co">#&gt; fmethod  1     -none- character</span>
<span class="co">#&gt; fitted  50     mts    numeric  </span>
<span class="co">#&gt; nodes    2     -none- list</span>
fcasts1.comb &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  htseg1, <span class="dt">h =</span> <span class="dv">4</span>, <span class="dt">method =</span> <span class="st">"comb"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>, <span class="dt">keep.fitted =</span> <span class="ot">TRUE</span>
)
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(fcasts1.comb)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 2002 </span>
<span class="co">#&gt; End = 2005 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;         Total        A        B       AA       AB       AC       BA</span>
<span class="co">#&gt; 2002 53.52186 29.77604 23.74583 9.226494 10.06002 10.48952 11.08129</span>
<span class="co">#&gt; 2003 53.95209 29.96953 23.98255 9.333485 10.11398 10.52207 11.14408</span>
<span class="co">#&gt; 2004 54.38231 30.16303 24.21928 9.440475 10.16794 10.55461 11.20687</span>
<span class="co">#&gt; 2005 54.81253 30.35652 24.45600 9.547466 10.22190 10.58716 11.26965</span>
<span class="co">#&gt;            BB</span>
<span class="co">#&gt; 2002 12.66453</span>
<span class="co">#&gt; 2003 12.83847</span>
<span class="co">#&gt; 2004 13.01241</span>
<span class="co">#&gt; 2005 13.18635</span>
<span class="kw">print</span>(fcasts1.comb)  
<span class="co">#&gt; $bts</span>
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 2002 </span>
<span class="co">#&gt; End = 2005 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;            AA       AB       AC       BA       BB</span>
<span class="co">#&gt; 2002 9.226494 10.06002 10.48952 11.08129 12.66453</span>
<span class="co">#&gt; 2003 9.333485 10.11398 10.52207 11.14408 12.83847</span>
<span class="co">#&gt; 2004 9.440475 10.16794 10.55461 11.20687 13.01241</span>
<span class="co">#&gt; 2005 9.547466 10.22190 10.58716 11.26965 13.18635</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $histy</span>
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1992 </span>
<span class="co">#&gt; End = 2001 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;            AA        AB       AC       BA       BB</span>
<span class="co">#&gt; 1992 7.862669  9.267647 10.08102 10.49276 11.04398</span>
<span class="co">#&gt; 1993 8.340355  9.416544 10.08193 10.51712 11.12452</span>
<span class="co">#&gt; 1994 8.549132  9.479022 10.11719 10.54013 11.24691</span>
<span class="co">#&gt; 1995 8.597699  9.532376 10.14705 10.61220 11.35138</span>
<span class="co">#&gt; 1996 8.770196  9.547591 10.16021 10.64932 11.48114</span>
<span class="co">#&gt; 1997 8.837793  9.555664 10.17101 10.70736 11.57668</span>
<span class="co">#&gt; 1998 8.893267  9.730347 10.28392 10.86323 11.93846</span>
<span class="co">#&gt; 1999 8.933993  9.797294 10.29026 10.92463 11.99712</span>
<span class="co">#&gt; 2000 9.133653  9.921262 10.34817 11.00622 12.16865</span>
<span class="co">#&gt; 2001 9.152636 10.022783 10.46706 11.03531 12.53717</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels</span>
<span class="co">#&gt; $labels$`Level 0`</span>
<span class="co">#&gt; [1] "Total"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels$`Level 1`</span>
<span class="co">#&gt; [1] "A" "B"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels$`Level 2`</span>
<span class="co">#&gt; [1] "AA" "AB" "AC" "BA" "BB"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $method</span>
<span class="co">#&gt; [1] "comb"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $fmethod</span>
<span class="co">#&gt; [1] "ets"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $fitted</span>
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1992 </span>
<span class="co">#&gt; End = 2001 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;            AA       AB       AC       BA       BB</span>
<span class="co">#&gt; 1992 7.961007 9.316365 10.11063 10.47954 11.00555</span>
<span class="co">#&gt; 1993 8.086162 9.380361 10.14901 10.51746 11.11241</span>
<span class="co">#&gt; 1994 8.406427 9.449875 10.10204 10.54646 11.20581</span>
<span class="co">#&gt; 1995 8.596873 9.503103 10.13172 10.57413 11.34110</span>
<span class="co">#&gt; 1996 8.699505 9.583717 10.17802 10.65257 11.46323</span>
<span class="co">#&gt; 1997 8.894878 9.610479 10.19815 10.69791 11.61576</span>
<span class="co">#&gt; 1998 9.038816 9.657048 10.23216 10.76628 11.73992</span>
<span class="co">#&gt; 1999 9.006894 9.787638 10.31848 10.89522 12.02710</span>
<span class="co">#&gt; 2000 9.098355 9.880182 10.34026 10.99247 12.18507</span>
<span class="co">#&gt; 2001 9.229538 9.969617 10.37733 11.07017 12.34581</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $nodes</span>
<span class="co">#&gt; $nodes$`Level 0`</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $nodes$`Level 1`</span>
<span class="co">#&gt; [1] 3 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "gts" "hts"</span>
<span class="kw">plot</span>(fcasts1.comb, <span class="dt">levels =</span> <span class="dv">2</span>)</code></pre></div>
<p><img src="figure/hts-eg1-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(fcasts1.comb, <span class="dt">include =</span> <span class="dv">5</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</code></pre></div>
<p><img src="figure/hts-eg1-3.png" width="672"></p>
</div>
<div id="example-2-hierarchical-time-series" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-hierarchical-time-series" class="anchor"></a>Example 2: hierarchical time series</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># hts example 2</span>
data &lt;-<span class="st"> </span><span class="kw">window</span>(htseg2, <span class="dt">start =</span> <span class="dv">1992</span>, <span class="dt">end =</span> <span class="dv">2002</span>)
test &lt;-<span class="st"> </span><span class="kw">window</span>(htseg2, <span class="dt">start =</span> <span class="dv">2003</span>)
fcasts2.mo &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  data, <span class="dt">h =</span> <span class="dv">5</span>, <span class="dt">method =</span> <span class="st">"mo"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>, <span class="dt">level =</span> <span class="dv">1</span>,
  <span class="dt">keep.fitted =</span> <span class="ot">TRUE</span>, <span class="dt">keep.resid =</span> <span class="ot">TRUE</span>
)
<span class="kw"><a href="reference/accuracy.gts.html">accuracy.gts</a></span>(fcasts2.mo, test)
<span class="co">#&gt;            Total          A          B        A10         A20         B30</span>
<span class="co">#&gt; ME    -0.1794783 -0.2486428 0.06916451 -0.1954860 -0.05315684 -0.02399186</span>
<span class="co">#&gt; RMSE   0.1818643  0.2732218 0.13585344  0.2180641  0.05572214  0.03144802</span>
<span class="co">#&gt; MAE    0.1794783  0.2486428 0.11251209  0.1954860  0.05315684  0.02399186</span>
<span class="co">#&gt; MAPE  11.1268019  8.4004312 2.27814495  7.5371465 14.49009308  1.69936058</span>
<span class="co">#&gt; MPE  -11.1268019  8.4004312 1.30221674  7.5371465 14.49009308 -1.69936058</span>
<span class="co">#&gt; MASE   0.5663497  1.3950200 0.81137939  1.2966219  1.93505737  0.52639468</span>
<span class="co">#&gt;             B40        A10A       A10B         A10C        A20A</span>
<span class="co">#&gt; ME   0.09315637 -0.03774880 -0.1649411  0.007203920 -0.04105604</span>
<span class="co">#&gt; RMSE 0.16498366  0.05205754  0.1779641  0.012753680  0.04696434</span>
<span class="co">#&gt; MAE  0.13636607  0.03873088  0.1649411  0.009838328  0.04105604</span>
<span class="co">#&gt; MAPE 3.85101876  3.11436103 20.5656022  1.774154141 13.39804861</span>
<span class="co">#&gt; MPE  2.45900161  3.04078646 20.5656022 -1.351777719 13.39804861</span>
<span class="co">#&gt; MASE 1.46488456  0.36661690  5.1038016  0.768361455  3.23432001</span>
<span class="co">#&gt;             A20B         B30A       B30B       B30C       B40A      B40B</span>
<span class="co">#&gt; ME   -0.01210080  -0.05065830 0.01324339 0.01342306 -0.0495926 0.1427490</span>
<span class="co">#&gt; RMSE  0.01432307   0.05944454 0.01485743 0.01599316  0.0728362 0.2349335</span>
<span class="co">#&gt; MAE   0.01228684   0.05065830 0.01324339 0.01342306  0.0495926 0.1800119</span>
<span class="co">#&gt; MAPE 15.88898042  16.89941739 2.89472660 2.07537753  3.6008092 8.1543683</span>
<span class="co">#&gt; MPE  15.22048749 -16.89941739 2.89472660 2.07537753 -3.6008092 6.1053561</span>
<span class="co">#&gt; MASE  0.83150955   2.07454397 1.47284424 1.10323688  0.9554614 4.3707453</span>
<span class="kw"><a href="reference/accuracy.gts.html">accuracy.gts</a></span>(fcasts2.mo, test, <span class="dt">levels =</span> <span class="dv">1</span>)
<span class="co">#&gt;               A          B</span>
<span class="co">#&gt; ME   -0.2486428 0.06916451</span>
<span class="co">#&gt; RMSE  0.2732218 0.13585344</span>
<span class="co">#&gt; MAE   0.2486428 0.11251209</span>
<span class="co">#&gt; MAPE  8.4004312 2.27814495</span>
<span class="co">#&gt; MPE   8.4004312 1.30221674</span>
<span class="co">#&gt; MASE  1.3950200 0.81137939</span>
fcasts2.td &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  data, <span class="dt">h =</span> <span class="dv">5</span>, <span class="dt">method =</span> <span class="st">"tdgsa"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>, 
  <span class="dt">keep.fitted =</span> <span class="ot">TRUE</span>, <span class="dt">keep.resid =</span> <span class="ot">TRUE</span>
)
<span class="kw">summary</span>(fcasts2.td)
<span class="co">#&gt;           Length Class  Mode     </span>
<span class="co">#&gt; bts        50    mts    numeric  </span>
<span class="co">#&gt; histy     110    mts    numeric  </span>
<span class="co">#&gt; labels      4    -none- list     </span>
<span class="co">#&gt; method      1    -none- character</span>
<span class="co">#&gt; fmethod     1    -none- character</span>
<span class="co">#&gt; fitted    110    mts    numeric  </span>
<span class="co">#&gt; residuals 110    mts    numeric  </span>
<span class="co">#&gt; nodes       3    -none- list</span>
<span class="kw">plot</span>(fcasts2.td, <span class="dt">include =</span> <span class="dv">5</span>)</code></pre></div>
<p><img src="figure/hts-eg2-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(fcasts2.td, <span class="dt">include =</span> <span class="dv">5</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))</code></pre></div>
<p><img src="figure/hts-eg2-2.png" width="672"></p>
</div>
<div id="example-3-grouped-time-series" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3-grouped-time-series" class="anchor"></a>Example 3: grouped time series</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gts example</span>
<span class="kw">plot</span>(infantgts, <span class="dt">levels =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="figure/gts-eg-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
fcasts3.comb &lt;-<span class="st"> </span><span class="kw">forecast</span>(infantgts, <span class="dt">h =</span> <span class="dv">4</span>, <span class="dt">method =</span> <span class="st">"comb"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>)
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(fcasts3.comb, <span class="dt">levels =</span> <span class="dv">1</span>)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 2004 </span>
<span class="co">#&gt; End = 2007 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;      Sex/female Sex/male</span>
<span class="co">#&gt; 2004   513.5419 672.7095</span>
<span class="co">#&gt; 2005   490.9157 666.5980</span>
<span class="co">#&gt; 2006   468.2894 660.4866</span>
<span class="co">#&gt; 2007   445.6631 654.3751</span>
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(fcasts3.comb, <span class="dt">levels =</span> <span class="dv">1</span>, <span class="dt">forecasts =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 1933 </span>
<span class="co">#&gt; End = 2003 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;      Sex/female Sex/male</span>
<span class="co">#&gt; 1933       1924     2502</span>
<span class="co">#&gt; 1934       2097     2698</span>
<span class="co">#&gt; 1935       1963     2538</span>
<span class="co">#&gt; 1936       2145     2668</span>
<span class="co">#&gt; 1937       2007     2565</span>
<span class="co">#&gt; 1938       1942     2685</span>
<span class="co">#&gt; 1939       2014     2712</span>
<span class="co">#&gt; 1940       2131     2766</span>
<span class="co">#&gt; 1941       2344     3023</span>
<span class="co">#&gt; 1942       2339     3096</span>
<span class="co">#&gt; 1943       2387     3071</span>
<span class="co">#&gt; 1944       2091     2728</span>
<span class="co">#&gt; 1945       2056     2685</span>
<span class="co">#&gt; 1946       2221     2922</span>
<span class="co">#&gt; 1947       2254     2977</span>
<span class="co">#&gt; 1948       2121     2857</span>
<span class="co">#&gt; 1949       1997     2624</span>
<span class="co">#&gt; 1950       2010     2662</span>
<span class="co">#&gt; 1951       2161     2749</span>
<span class="co">#&gt; 1952       2049     2774</span>
<span class="co">#&gt; 1953       2081     2662</span>
<span class="co">#&gt; 1954       1938     2608</span>
<span class="co">#&gt; 1955       1946     2625</span>
<span class="co">#&gt; 1956       2047     2583</span>
<span class="co">#&gt; 1957       2058     2693</span>
<span class="co">#&gt; 1958       1996     2590</span>
<span class="co">#&gt; 1959       2121     2794</span>
<span class="co">#&gt; 1960       2015     2652</span>
<span class="co">#&gt; 1961       2010     2690</span>
<span class="co">#&gt; 1962       2070     2791</span>
<span class="co">#&gt; 1963       2016     2636</span>
<span class="co">#&gt; 1964       1895     2508</span>
<span class="co">#&gt; 1965       1767     2357</span>
<span class="co">#&gt; 1966       1737     2328</span>
<span class="co">#&gt; 1967       1784     2421</span>
<span class="co">#&gt; 1968       1841     2452</span>
<span class="co">#&gt; 1969       1923     2584</span>
<span class="co">#&gt; 1970       1902     2718</span>
<span class="co">#&gt; 1971       2125     2684</span>
<span class="co">#&gt; 1972       1888     2577</span>
<span class="co">#&gt; 1973       1732     2356</span>
<span class="co">#&gt; 1974       1648     2326</span>
<span class="co">#&gt; 1975       1389     1952</span>
<span class="co">#&gt; 1976       1391     1770</span>
<span class="co">#&gt; 1977       1205     1629</span>
<span class="co">#&gt; 1978       1157     1575</span>
<span class="co">#&gt; 1979       1116     1441</span>
<span class="co">#&gt; 1980       1055     1383</span>
<span class="co">#&gt; 1981       1011     1354</span>
<span class="co">#&gt; 1982       1060     1425</span>
<span class="co">#&gt; 1983       1047     1302</span>
<span class="co">#&gt; 1984        925     1259</span>
<span class="co">#&gt; 1985       1075     1398</span>
<span class="co">#&gt; 1986        918     1244</span>
<span class="co">#&gt; 1987        896     1235</span>
<span class="co">#&gt; 1988        916     1227</span>
<span class="co">#&gt; 1989        882     1136</span>
<span class="co">#&gt; 1990        926     1223</span>
<span class="co">#&gt; 1991        802     1049</span>
<span class="co">#&gt; 1992        775     1073</span>
<span class="co">#&gt; 1993        680      918</span>
<span class="co">#&gt; 1994        658      866</span>
<span class="co">#&gt; 1995        660      806</span>
<span class="co">#&gt; 1996        624      843</span>
<span class="co">#&gt; 1997        608      744</span>
<span class="co">#&gt; 1998        555      706</span>
<span class="co">#&gt; 1999        601      812</span>
<span class="co">#&gt; 2000        567      725</span>
<span class="co">#&gt; 2001        562      751</span>
<span class="co">#&gt; 2002        572      699</span>
<span class="co">#&gt; 2003        530      677</span>
<span class="kw">plot</span>(fcasts3.comb)</code></pre></div>
<p><img src="figure/gts-eg-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(fcasts3.comb, <span class="dt">include =</span> <span class="dv">5</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</code></pre></div>
<p><img src="figure/gts-eg-3.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
fcasts3.combsd &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  infantgts, <span class="dt">h =</span> <span class="dv">4</span>, <span class="dt">method =</span> <span class="st">"comb"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>,
  <span class="dt">weights =</span> <span class="st">"sd"</span>, <span class="dt">keep.fitted =</span> <span class="ot">TRUE</span>
)
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(fcasts3.combsd, <span class="dt">levels =</span> <span class="dv">1</span>)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 2004 </span>
<span class="co">#&gt; End = 2007 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;      Sex/female Sex/male</span>
<span class="co">#&gt; 2004   513.5419 672.7095</span>
<span class="co">#&gt; 2005   490.9157 666.5980</span>
<span class="co">#&gt; 2006   468.2894 660.4866</span>
<span class="co">#&gt; 2007   445.6631 654.3751</span>
<span class="kw">summary</span>(fcasts3.combsd)
<span class="co">#&gt;         Length Class   Mode     </span>
<span class="co">#&gt; bts       64   mts     numeric  </span>
<span class="co">#&gt; histy   1136   mts     numeric  </span>
<span class="co">#&gt; labels     2   -none-  list     </span>
<span class="co">#&gt; method     1   -none-  character</span>
<span class="co">#&gt; fmethod    1   -none-  character</span>
<span class="co">#&gt; fitted  1136   mts     numeric  </span>
<span class="co">#&gt; groups    64   gmatrix numeric</span>

fcasts3.combn &lt;-<span class="st"> </span><span class="kw">forecast</span>(
  infantgts, <span class="dt">h =</span> <span class="dv">4</span>, <span class="dt">method =</span> <span class="st">"comb"</span>, <span class="dt">fmethod =</span> <span class="st">"ets"</span>,
  <span class="dt">weights =</span> <span class="st">"nseries"</span>, <span class="dt">keep.resid =</span> <span class="ot">TRUE</span>
)
<span class="kw"><a href="reference/aggts.html">aggts</a></span>(fcasts3.combn, <span class="dt">levels =</span> <span class="dv">3</span>)
<span class="co">#&gt; Time Series:</span>
<span class="co">#&gt; Start = 2004 </span>
<span class="co">#&gt; End = 2007 </span>
<span class="co">#&gt; Frequency = 1 </span>
<span class="co">#&gt;      NSW female VIC female QLD female SA female WA female NT female</span>
<span class="co">#&gt; 2004   170.1027   121.2634  103.75624  35.67006  46.72033 12.049177</span>
<span class="co">#&gt; 2005   159.6834   120.4511   98.79675  34.85778  45.90805 10.439765</span>
<span class="co">#&gt; 2006   149.2640   119.6388   93.83726  34.04550  45.09577  8.830352</span>
<span class="co">#&gt; 2007   138.8447   118.8266   88.87778  33.23322  44.28349  7.220939</span>
<span class="co">#&gt;      ACT female TAS female NSW male VIC male QLD male  SA male  WA male</span>
<span class="co">#&gt; 2004   6.060038   20.78827 211.1664 184.2918 134.3276 35.09971 53.21625</span>
<span class="co">#&gt; 2005   5.107381   19.97599 208.4218 184.0622 133.0403 34.87011 52.98665</span>
<span class="co">#&gt; 2006   4.154725   19.16371 205.6772 183.8326 131.7530 34.64051 52.75705</span>
<span class="co">#&gt; 2007   3.202069   18.35143 202.9326 183.6030 130.4657 34.41091 52.52745</span>
<span class="co">#&gt;       NT male ACT male TAS male</span>
<span class="co">#&gt; 2004 21.00825 13.60149 21.74516</span>
<span class="co">#&gt; 2005 20.79164 13.79302 21.51556</span>
<span class="co">#&gt; 2006 20.57504 13.98456 21.28596</span>
<span class="co">#&gt; 2007 20.35843 14.17609 21.05636</span></code></pre></div>
</div>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>This package is free and open source software, licensed under GPL (&gt;= 2).</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=hts">https://â€‹cran.r-project.org/â€‹package=hts</a>
</li>
<li>Report a bug at <br><a href="https://github.com/earowang/hts/issues">https://â€‹github.com/â€‹earowang/â€‹hts/â€‹issues</a>
</li>
</ul>
<h2>License</h2>
<p>GPL (&gt;= 2)</p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Rob Hyndman <br><small class="roles"> Author </small> </li>
<li>Alan Lee <br><small class="roles"> Author </small> <br><small>(Fast computation using recursive methods)</small>
</li>
<li>Earo Wang <br><small class="roles"> Author, maintainer </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/earowang/hts"><img src="https://travis-ci.org/earowang/hts.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/gh/earowang/hts"><img src="https://codecov.io/gh/earowang/hts/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://cran.r-project.org/package=hts"><img src="http://www.r-pkg.org/badges/version/hts" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=hts"><img src="http://cranlogs.r-pkg.org/badges/hts" alt="Downloads"></a></li>
<li><a href="https://github.com/earowang/hts/pulls"><img src="http://githubbadges.herokuapp.com/earowang/hts/pulls.svg?style=flat" alt="Pending Pull-Requests"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Rob Hyndman, Alan Lee, Earo Wang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
